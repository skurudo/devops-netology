# Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"

## 1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?
Linux:
ip a или /sbin/ifconfig

Windows:
ipconfig /all

## 2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

Link Layer Discovery Protocol (LLDP) — протокол канального уровня, позволяющий сетевому оборудованию оповещать оборудование, работающее в локальной сети, о своём существовании и передавать ему свои характеристики, а также получать от него аналогичные сведения.

Пакет lldpd, команда lldpctl

## 3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

VLAN

$ sudo apt-get install vlan
$ sudo modprobe 8021q
$ sudo su -c 'echo "8021q" >> /etc/modules'

В netplan что-то такое:
> cat /etc/netplan/11-vlan.11.yaml
>  vlans:
>    vlan.11:
>      id: 11
>      link: enp1s0
>      optional: true
>      dhcp4: false
>      dhcp6: false
>      addresses: [192.168.1.92/24, ]
>      nameservers:
>        addresses: [192.168.1.91, ]

В человеческом мире, без netplan:
$ sudo vconfig add eth0 100
$ sudo ip addr add 10.0.0.1/24 dev eth0.100
$ sudo nano /etc/network/interfaces

> auto eth0.100
> iface eth0.100 inet dhcp
>     vlan-raw-device eth0

## 4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

### Какие типы агрегации интерфейсов есть в Linux?

бондинг, bonding

$ sudo modprobe bonding
$ sudo apt-get install ifenslave
$ sudo ip link add bond0 type bond mode 802.3ad
$ sudo ip link set eth0 master bond0
$ sudo ip link set eth1 master bond0

### Какие опции есть для балансировки нагрузки? 
Mode-0(balance-rr)
Mode-2(balance-xor)
Mode-5(balance-tlb) 
Mode-6(balance-alb) 
Mode-4(802.3ad) 

### Приведите пример конфига.

$ sudo nano /etc/network/interfaces
> auto bond0
> iface bond0 inet static
>     address 192.168.1.150
>     netmask 255.255.255.0    
>     gateway 192.168.1.1
>     dns-nameservers 192.168.1.1 8.8.8.8
>     dns-search domain.local
>         slaves eth0 eth1
>         bond_mode 0
>         bond-miimon 100
>         bond_downdelay 200
>         bound_updelay 200

## 5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

### Сколько IP адресов в сети с маской /29 ? 
/29 - содержит 8 адресов

### Сколько /29 подсетей можно получить из сети с маской /24. 
/24 - 256 адресов, т.е. можно получить 32 сети

### Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24
10.10.10.0/29 
10.10.10.8/29
10.10.10.16/29 

## 6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

Все вкусное из RFC1918 забрали, тогда допустимо обратиться к RFC6598 и использовать адреса 100.64.0.0/10 - маска /26

$ ipcalc 100.64.0.0/10 -s 45
Address:   100.64.0.0           01100100.01 000000.00000000.00000000
Netmask:   255.192.0.0 = 10     11111111.11 000000.00000000.00000000
Wildcard:  0.63.255.255         00000000.00 111111.11111111.11111111
=>
Network:   100.64.0.0/10        01100100.01 000000.00000000.00000000
HostMin:   100.64.0.1           01100100.01 000000.00000000.00000001
HostMax:   100.127.255.254      01100100.01 111111.11111111.11111110
Broadcast: 100.127.255.255      01100100.01 111111.11111111.11111111
Hosts/Net: 4194302               Class A

1. Requested size: 45 hosts
Netmask:   255.255.255.192 = 26 11111111.11111111.11111111.11 000000
Network:   100.64.0.0/26        01100100.01000000.00000000.00 000000
HostMin:   100.64.0.1           01100100.01000000.00000000.00 000001
HostMax:   100.64.0.62          01100100.01000000.00000000.00 111110
Broadcast: 100.64.0.63          01100100.01000000.00000000.00 111111
Hosts/Net: 62                    Class A

Needed size:  64 addresses.
Used network: 100.64.0.0/26
Unused:
100.64.0.64/26
100.64.0.128/25
100.64.1.0/24
100.64.2.0/23
100.64.4.0/22
100.64.8.0/21
100.64.16.0/20
100.64.32.0/19
100.64.64.0/18
100.64.128.0/17
100.65.0.0/16
100.66.0.0/15
100.68.0.0/14
100.72.0.0/13
100.80.0.0/12
100.96.0.0/11

## 7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?

### Linux

$ arp -a
host-195-2-70-247.hosted-by-vdsina.ru (195.2.70.247) at 84:03:28:63:88:d8 [ether] on ens3
web.shtxt.info (195.2.70.18) at 52:54:00:04:70:36 [ether] on ens3
host-195-2-70-243.hosted-by-vdsina.ru (195.2.70.243) at 80:7f:f8:54:b2:04 [ether] on ens3
? (10.0.3.2) at <incomplete> on lxcbr0
v746293.hosted-by-vdsina.ru (195.2.85.10) at 52:54:00:0b:63:35 [ether] on ens3
v323369.hosted-by-vdsina.ru (195.2.70.111) at <incomplete> on ens3
host-195-2-70-1.hosted-by-vdsina.ru (195.2.70.1) at 70:85:c2:72:1f:03 [ether] on ens3
v994485.hosted-by-vdsina.ru (195.2.70.2) at 52:54:00:0f:2c:b5 [ether] on ens3

или 

$ arp -n
Address                  HWtype  HWaddress           Flags Mask            Iface
195.2.70.247             ether   84:03:28:63:88:d8   C                     ens3
195.2.70.18              ether   52:54:00:04:70:36   C                     ens3
195.2.70.243             ether   80:7f:f8:54:b2:04   C                     ens3
10.0.3.2                         (incomplete)                              lxcbr0
195.2.85.10              ether   52:54:00:0b:63:35   C                     ens3
195.2.70.111                     (incomplete)                              ens3
195.2.70.1               ether   70:85:c2:72:1f:03   C                     ens3
195.2.70.2               ether   52:54:00:0f:2c:b5   C                     ens3

все адрес:
$ sudo ip -s -s neigh flush all

один адрес
$ arp -d 195.2.70.1

### Windows
arp -a

удалить все:
arp -d 
или
netsh interface ip delete arpcache

один адрес:
arp -s 192.168.1.57 f8-0d-60-9b-52-a7
