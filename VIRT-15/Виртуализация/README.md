# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

## Задача 1
> Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

### Ответ на задачу 1
Полная аппаратная виртуализация - используется своя операционная система, которая ставится на хост (железный сервер) и на ее основе уже работают виртуальные машины. Паравиртуализация работает уже на базе операционной системы, в отличии от полной виртуализации у нас используется не какая-то своя операционная система, а что-то более распространенное. Что же касается виртуализации на основе операционной системы, мы можем использовать ядро операционной системы для запуска виртуальных машин. Однако есть и ограничения - мы не сможем запускать виртуальные машины, отличные от типа ядра операционной системы.

## Задача 2

> Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.> 
> Организация серверов:
> - физические сервера,
> - паравиртуализация,
> - виртуализация уровня ОС.
> Условия использования:
> - Высоконагруженная база данных, чувствительная к отказу.
> - Различные web-приложения.
> - Windows системы для использования бухгалтерским отделом.
> - Системы, выполняющие высокопроизводительные расчеты на GPU.
> Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

### Ответ на задачу 2
> - Высоконагруженная база данных, чувствительная к отказу.

Для высоконагруженной базы данных можно использовать как полную аппаратную виртуализацию, так и паравиртуализацию. Для создания понадобится от двух серверов - минимум 2 шт, лучше три (а дальше по нагрузке). Главное обеспечить отказоустойчивость и масштабируемость. Поэтому идеальная история - виртуальные сервера с базой данных на разных физических хост машинах.

> - Различные web-приложения.

Веб приложения менее требовательны к окружению в виртуальной среде, поэтому можно использовать и полную аппаратную виртуализацию, и паравиртуализацию, и, если позволяют условия - виртуализация на основе ОС. Начну с примеров с конца... можно использовать тот же docker или LXC. Паравиртуализация обычно более выгодная история и позволит больше маневрировать. Основная цель - разворачивать оперативно и возможность миграции. Полная аппаратная виртуалия, на мой взгяд, менее выиграшная история.

> - Windows системы для использования бухгалтерским отделом.

Обычно для Windows-based использовать стоит Hyper-V (в том или ином варианте - core или внутри win сервера). Однако это не единственный вариант, вполне можно использовать и полную аппаратную виртуализацию - пример VMWare (но базе ESXi будет грустно с миграцией), но можно попробовать выкрутиться паравиртуализацией - KVM. 

> - Системы, выполняющие высокопроизводительные расчеты на GPU.

Не пробовал проброс GPU внутрь, но по всей видимости нам потребуется либо полная аппаратная виртуализация при наличии поддержки оборудования, либо паравиртуализация. Второй вариант более предпочтителен, так как при поддержке драйверов скорее всего не будет ограничений по оборудовании.


## Задача 3

> Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.
> Сценарии:
> 1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
> 2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
> 3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
> 4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

### Ответ на задачу 3
> 1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.

Сто виртуальных машин скорее всего не поместятся в рамках одного сервера, так что выбор будет в пользу кластера на hyper-v или vwware. Управление осуществляться будет или скриптами, или в случае с hyper-v - SCCM и vmware - vsphere.

> 2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.

Скорее всего я бы пошел в сторону KVM в связке с Proxmox

> 3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.

Лучше использовать Hyper-V Core или посмотреть в сторону KVM.

> 4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

Если нет требования к ядру, то можем взять виртуализацию на основе ОС. Более простой вариант - паравиртуализация: Virtualbox и т.д. 


## Задача 4

> Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

### Ответ на задачу 4
 Если бы была возможность, то конечно гомогенная среда была бы лучше.. это как в случаях с моновендорами - хорошо, когда одинаковое и стандартизированное. Но так бывает не всегда. Чаще всего гетерогенная среда - неизбежность. А здесь нам приходят проблемы - миграции между разными типами гипервизоров становится боль. Автоматиация усложняется. Решать проблемы обычно приходится самописными скриптами и мониторингами.
